{"version":3,"sources":["Entity/actions.ts","Entity/entityReducer.ts","Student/useStudent.tsx","Entity/StorageService.ts","Entity/EntityActions.ts","Entity/EntityRow.tsx","AppData/useApp.tsx","StudentExtended/actions.ts","Common/useHover.tsx","Entity/EntityList.tsx","Student/components/MyForm.tsx","Student/components/StudentForm.tsx","Student/StudentPage.tsx","StudentExtended/studentReducer.ts","StudentExtended/useStudent.tsx","StudentExtended/components/MyForm.tsx","Common/Select.tsx","StudentExtended/components/StudentGrades.tsx","StudentExtended/components/StudentForm.tsx","Common/AutoSuggest.tsx","StudentExtended/StudentPage.tsx","App.tsx","index.tsx"],"names":["EntityActionTypes","StudentContext","entityActions","entityReducer","initialEntity","state","action","type","GET_ENTITIES","payload","entities","pageCount","SET_LOADING","loading","SET_QUERY","query","ADD","formMode","entity","id","DISPLAY","EDIT","CLOSE_FORM","undefined","REMOVE","filter","e","STORE","map","ent","CANCEL","GO_TO_PAGE","currentPage","page","StorageService","storageName","getFromJSON","entitiesALL","_namesALL","isWebStorageSupported","this","window","s","localStorage","getItem","JSON","parse","name","pageSize","trim","length","includes","offset","pageEntities","slice","Math","ceil","Promise","resolve","reject","setTimeout","find","setItem","stringify","max","EntityActions","obj","API","storageService","getEntites","dispatch","appState","a","getPageEntites","response","data","results","FAIL","error","displayEntity","getEntity","editEntity","removeEntity","storeEntity","axios","create","baseURL","timeout","headers","namesALL","initialStudent","url","code","email","avatar","types","initialState","canEdit","something","StudentProvider","children","useReducer","jsonStudents","createContext","Provider","value","useStudent","context","useContext","Error","AppContext","StudentActionTypes","EntityRow","props","renderColumns","display","edit","remove","useState","isHovered","hoverProps","setValue","divRef","useRef","handleMouseOver","handleMouseOut","useEffect","node","current","addEventListener","removeEventListener","useHover","hoverRef","className","ref","key","href","onClick","preventDefault","title","icon","faEdit","color","faWindowClose","EntityList","style","border","previousLabel","nextLabel","breakLabel","onPageChange","selectedItem","selected","containerClassName","previousLinkClassName","nextLinkClassName","disabledClassName","activeClassName","marginPagesDisplayed","pageRangeDisplayed","MyForm","formik","useFormik","enableReinitialize","initialValues","fromMode","validationSchema","Yup","required","onSubmit","values","saveForm","handleSubmit","htmlFor","onChange","handleChange","onBlur","handleBlur","disabled","width","touched","errors","cancel","StudentForm","borderRadius","padding","marginTop","float","size","student","gradesAll","AppProvider","jsonGrades","grade","words","split","addGrades","useApp","Page","console","log","minWidth","join","src","height","alt","StudentPage","studentReducer","grades","Reducer","sg","gradeId","studentJoins","STUDENT_ASSIGN_GRADE","studentGradeIds","studentId","gradeName","students","STUDENT_REMOVE_GRADE","prevState","useCallback","Select","selectedIndex","currentTarget","selectedOption","options","option","label","StudentGrades","already","g","Object","unshift","EntityAutosuggestMulti","Autosuggest","AutoSuggestEntity","onSuggestionsClearRequested","setState","suggestions","anyWord","valueWordRegex","studentWords","valWordRegex","studentWord","test","getSuggestions","highlighted","multiSection","onSuggestionsFetchRequested","bind","onSuggestionSelected","getSuggestionValue","renderSuggestion","onSuggestionHighlighted","highlightFirstSuggestion","renderSuggestionsContainer","inputProps","placeholder","changeEvent","event","onSelectQuery","suggestion","params","matches","AutosuggestHighlightMatch","parts","AutosuggestHighlightParse","part","index","highlight","text","restInputProps","containerProps","newValue","method","escapedValue","replace","word","RegExp","React","fontSize","StudentPageExtended","App","to","path","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.9d1a5ae6.chunk.js","sourcesContent":["import { IEntity } from \"./types\";\r\nimport { IAppState } from \"../AppData/types\";\r\n\r\nexport enum EntityActionTypes {\r\n\tGET_ENTITIES = 'GET_ENTITIES',\r\n\tSET_LOADING = 'SET_LOADING',\r\n\tFAIL = 'FAIL',\r\n\tSET_QUERY = 'SET_QUERY',\r\n\tADD = 'ADD',\r\n\tDISPLAY = 'DISPLAY',\r\n\tCLOSE_FORM = 'CLOSE_FORM',\r\n\tEDIT = 'EDIT',\r\n\tREMOVE = 'REMOVE',\r\n  \tSTORE = 'STORE',\r\n\tCANCEL = 'CANCEL',\r\n\tGO_TO_PAGE = 'GO_TO_PAGE'\r\n}\r\n\r\n\r\nexport interface IEntitySetLoading { \r\n\ttype: EntityActionTypes.SET_LOADING, \r\n\tloading: boolean\r\n}\r\n\r\nexport interface IEntityGetEntities {\r\n\ttype: EntityActionTypes.GET_ENTITIES;\r\n\tpayload: {\r\n\t\tentities: IEntity[]; \r\n\t\tpageCount: number;\r\n\t\tappState: IAppState;\r\n\t}\r\n}\r\n\r\nexport interface IEntitySetQuery {\r\n\ttype: EntityActionTypes.SET_QUERY;\r\n\tquery: string; \r\n}\r\n\r\nexport interface IEntityAdd { \r\n\ttype: EntityActionTypes.ADD \r\n}\r\n\r\nexport interface IEntityDisplay {\r\n\ttype: EntityActionTypes.DISPLAY;\r\n\tentity: IEntity; \r\n}\r\n\r\nexport interface IEntityEdit {\r\n\ttype: EntityActionTypes.EDIT;\r\n\tentity: IEntity; \r\n}\r\n\r\nexport interface IEntityRemove {\r\n\ttype: EntityActionTypes.REMOVE;\r\n\tid: number;\r\n}\r\n\r\nexport interface IEntityCancel { \r\n\ttype: EntityActionTypes.CANCEL \r\n}\r\n\r\nexport interface IEntityCloseForm { \r\n\ttype: EntityActionTypes.CLOSE_FORM \r\n}\r\n\r\nexport interface IEntityStore { \r\n\ttype: EntityActionTypes.STORE,\r\n\tentity: IEntity\r\n}\r\n\r\nexport interface IEntityGoToPage {\r\n\ttype: EntityActionTypes.GO_TO_PAGE;\r\n\tpage: number; \r\n}\r\n\r\nexport interface IEntityFail {\r\n\ttype: EntityActionTypes.FAIL;\r\n\terror: any; \r\n}\r\n\r\n\r\nexport type EntityAcceptedActions = IEntitySetLoading | IEntityGetEntities | IEntitySetQuery |\r\n\tIEntityAdd | IEntityFail |\r\n\tIEntityDisplay | IEntityEdit | IEntityRemove |\tIEntityStore | IEntityCancel |\r\n\tIEntityCloseForm | IEntityGoToPage;\r\n","\r\nimport { IEntityState, IEntity } from './types';\r\nimport { EntityActionTypes, EntityAcceptedActions } from './actions';\r\n\r\nexport const entityReducer: <\r\n\tTS extends IEntityState<IEntity>,\r\n\tT extends IEntity\r\n>(initialEntity: T) => React.Reducer<TS, EntityAcceptedActions> = (initialEntity) => {\r\n\treturn (state, action) =>  {\r\n\t\tswitch(action.type) {\r\n\r\n\t\t\tcase EntityActionTypes.GET_ENTITIES: {\r\n\t\t\t\tconst { entities, pageCount } = action.payload;\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tentities,\r\n\t\t\t\t\tpageCount\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tcase EntityActionTypes.SET_LOADING:\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tloading: action.loading\r\n\t\t\t\t}\r\n\r\n\t\t\tcase EntityActionTypes.SET_QUERY:\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tquery: action.query\r\n\t\t\t\t}\t\t\t\t\r\n\t\r\n\t\t\tcase EntityActionTypes.ADD: {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tformMode: 'add',\r\n\t\t\t\t\tentity: { \r\n\t\t\t\t\t\t...initialEntity, \r\n\t\t\t\t\t\tid: -1\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}    \t\r\n\t\r\n\t\t\tcase EntityActionTypes.DISPLAY: {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tformMode: 'display',\r\n\t\t\t\t\tentity: { ...action.entity },\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t\tcase EntityActionTypes.EDIT: {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tformMode: 'edit',\r\n\t\t\t\t\tentity: { ...action.entity }\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tcase EntityActionTypes.CLOSE_FORM: \r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tformMode: 'none',\r\n\t\t\t\t\tentity: undefined\t\t\t\r\n\t\t\t\t}\r\n\r\n\t\t\tcase EntityActionTypes.REMOVE: {\r\n\t\t\t\tconst  id = action.id\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tformMode: 'display',\r\n\t\t\t\t\tentity: undefined,\r\n\t\t\t\t\tentities: state.entities.filter(e => e.id !== id)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcase EntityActionTypes.STORE: {\r\n\t\t\t\tconst entity = action.entity\r\n\t\t\t\tlet entities: IEntity[]  = state.entities;\r\n\t\t\t\tif (state.formMode === 'add') {\r\n\t\t\t\t\tentities = [...entities, { ...entity }]\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tentities = entities.map(ent => ent.id === entity.id ? { ...entity } : ent)\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tformMode: 'edit',\r\n\t\t\t\t\tentity: entity,\r\n\t\t\t\t\tentities: entities\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\r\n\t\t\tcase EntityActionTypes.CANCEL: {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tformMode: 'display',\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tcase EntityActionTypes.GO_TO_PAGE: {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tcurrentPage: action.page\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t\tdefault:\r\n\t\t\t\t// throw new Error(`Unhandled action type: ${action!.type}`);\r\n\t\t\t\t// when combine reducers \r\n\t\t\t\treturn state\r\n\t\t}\r\n\t}\r\n}\r\n","\r\nimport React, { createContext, useContext, useReducer, Dispatch } from 'react';\r\nimport { IStudentState } from './types';\r\nimport { entityReducer } from '../Entity/entityReducer';\r\nimport { IStudent } from './types';\r\nimport { EntityAcceptedActions } from '../Entity/actions';\r\nimport { EntityActions } from '../Entity/EntityActions';\r\nimport jsonStudents from './Students.json'\r\n\r\nexport const initialStudent: IStudent = { \r\n\tid: 0, \r\n\tname: '',\r\n\turl: '',\r\n\tcode: '',\r\n\temail: '',\r\n\tavatar: 'https://img.pokemondb.net/artwork/diglett.jpg',\r\n\ttypes: []\r\n};\r\n\r\n\r\nconst initialState: IStudentState = { \r\n\tentities: [],\r\n\tloading: false,\r\n\tformMode: 'display',\r\n\tcanEdit: true,\r\n\tquery: '',\r\n\tpageCount: 0,\r\n\tcurrentPage: 0,\r\n\tsomething: [1, 2, 3]\r\n};\r\n\r\nexport interface IStudentContext {\r\n\tstate: IStudentState;\r\n\tdispatch: Dispatch<EntityAcceptedActions>;\r\n}\r\n\r\nlet StudentContext: React.Context<IStudentContext>;\r\n\r\ninterface IProps {\r\n\tchildren: React.ReactNode\r\n}\r\n\r\nlet entityActions: EntityActions;\r\n\r\nexport const StudentProvider: React.FC<IProps> = ({ children }) => {\r\n\tconst [state, dispatch] = useReducer(entityReducer<IStudentState, IStudent>(initialStudent), initialState)\r\n\r\n\tif (StudentContext === undefined) {\r\n\t\tentityActions = new EntityActions({\r\n\t\t\tstorageName: 'Students',\r\n\t\t\tgetFromJSON: () => [...jsonStudents],\r\n\t\t\tpageSize: pageSize,\r\n\t\t\tbaseURL: 'https//abc.com/students/'\r\n\t\t});\r\n\t\t\r\n\t\tStudentContext = createContext<IStudentContext>({ state, dispatch })\r\n\t}\r\n\r\n  \treturn (\r\n   \t<StudentContext.Provider value={{ state, dispatch }}>\r\n   \t\t{children}\r\n   \t</StudentContext.Provider>\r\n  \t)\r\n}\r\n\r\nconst pageSize = 9;\r\n\r\nexport const useStudent = () => {\r\n\tconst context = useContext(StudentContext);\r\n\tif (!context) {\r\n\t\tthrow new Error('useStudent must be used within a StudentProvider')\r\n\t}\r\n\r\n\tconst { state, dispatch } = context;\r\n\r\n\tconst { getEntites, displayEntity, editEntity, removeEntity, storeEntity } = entityActions;\r\n\r\n\treturn { state, dispatch, getEntites, displayEntity, editEntity, removeEntity, storeEntity };\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import { IEntity } from \"./types\";\r\n \r\ninterface IProps {\r\n\tstorageName: string,\r\n\tgetFromJSON: () => IEntity[],\r\n}\r\n\r\nexport class StorageService {\r\n\r\n\tstorageName: string;\r\n\tentitiesALL: IEntity[];\r\n\t_namesALL: string[];\r\n\tisWebStorageSupported: boolean;\r\n\t\r\n\tconstructor(storageName: string,\tgetFromJSON: () => IEntity[]) {\r\n\t\tthis.storageName = storageName\r\n\t\tthis.isWebStorageSupported = 'localStorage' in window \r\n\r\n\t\tconst s = localStorage.getItem(storageName);\r\n\t\tthis.entitiesALL = s !== null ? JSON.parse(s) : getFromJSON();\r\n\t\tthis._namesALL = this.entitiesALL.map(entity => entity.name)\r\n\t}\r\n\t\r\n\tget namesALL(): string[] { \r\n\t\treturn this._namesALL \r\n\t}\r\n\r\n\tasync getPageEntites(query: string, pageSize: number, page: number): Promise<any> {\r\n\t\tconst entities = query.trim().length === 0 ? \r\n\t\t\tthis.entitiesALL : \r\n\t\t\tthis.entitiesALL.filter(entity => entity.name.includes(query))\r\n\t\tconst offset = page * pageSize\r\n\t\tconst pageEntities = entities.slice(offset, offset + pageSize);\r\n\t\tconst pageCount =  Math.ceil(entities.length / pageSize)\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tresolve({\r\n\t\t\t\t\t'status': 200,\r\n\t\t\t\t\t'content-type': 'application/json',\r\n\t\t\t\t\t'data' : {\r\n\t\t\t\t\t\t'results': { pageEntities, pageCount }\r\n\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}, 200)\r\n\t\t})\r\n\t}\r\n\r\n\tasync getEntity(id: number): Promise<any> {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\t resolve({\r\n\t\t\t\t\t'status': 200,\r\n\t\t\t\t\t'content-type': 'application/json',\r\n\t\t\t\t\t'data' : {\r\n\t\t\t\t\t  'results': this.entitiesALL.find(e => e.id === id)\r\n\t\t\t\t\t}\r\n\t\t\t\t })\r\n\t\t\t  }, 200)\r\n\t\t})\r\n\t}\r\n\t\r\n\tasync removeEntity(id: number): Promise<any> {\r\n\t\tthis.entitiesALL = this.entitiesALL.filter(e => e.id !== id);\r\n\t\tlocalStorage.setItem(this.storageName, JSON.stringify(this.entitiesALL));\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\t resolve({\r\n\t\t\t\t\t'status': 200,\r\n\t\t\t\t\t'content-type': 'application/json',\r\n\t\t\t\t\t'data' : {\r\n\t\t\t\t\t  'results': true\r\n\t\t\t\t\t}\r\n\t\t\t\t })\r\n\t\t\t  }, 200)\r\n\t\t})\r\n\t}\r\n\t\r\n\t\r\n\tasync storeEntity(formMode: string, entity: IEntity): Promise<any> {\r\n\t\r\n\t\tif (formMode === 'add') {\r\n\t\t\tentity.id = this.entitiesALL.length === 0 ? 1 : Math.max(...this.entitiesALL.map(e => e.id)) + 1\r\n\t\t\tthis.entitiesALL = [...this.entitiesALL, { ...entity }]\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.entitiesALL = this.entitiesALL.map(ent => ent.id === entity.id ? { ...entity } : ent)\r\n\t\t}\r\n\t\tlocalStorage.setItem(this.storageName, JSON.stringify(this.entitiesALL));\r\n\t\tthis._namesALL = this.entitiesALL.map(entity => entity.name)\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\t resolve({\r\n\t\t\t\t\t'status': 200,\r\n\t\t\t\t\t'content-type': 'application/json',\r\n\t\t\t\t\t'data' : {\r\n\t\t\t\t\t  'results': entity\r\n\t\t\t\t\t}\r\n\t\t\t\t })\r\n\t\t\t  }, 200)\r\n\t\t})\r\n\t}\r\n\r\n}\r\n\r\n\r\n\r\n\r\n","import { IEntity } from \"./types\";\r\nimport { Dispatch } from \"react\";\r\nimport { EntityAcceptedActions, EntityActionTypes } from \"./actions\";\r\nimport axios from 'axios';\r\nimport { StorageService } from \"./StorageService\";\r\nimport { IAppState } from \"../AppData/types\";\r\n\r\ninterface IProps {\r\n\tstorageName: string,\r\n\tgetFromJSON: () => IEntity[],\r\n\tpageSize: number,\r\n\tbaseURL: string\r\n}\r\n\r\nexport class EntityActions {\r\n\tpageSize = 10;\r\n\tAPI: any;\r\n\tstorageService: StorageService;\r\n\r\n\tconstructor(obj: IProps) {\r\n\t\tthis.pageSize = obj.pageSize;\r\n\r\n\t\tthis.API = axios.create({\r\n\t\t\tbaseURL: obj.baseURL,\r\n\t\t\ttimeout: 1000,\r\n  \t\t\theaders: {'X-Custom-Header': 'foobar'}\r\n\t\t });\r\n\r\n\t\tthis.storageService = new StorageService(obj.storageName, obj.getFromJSON)\r\n\t}\r\n\r\n\tget namesALL() { return this.storageService.namesALL }\r\n\r\n\tgetEntites = async (dispatch: Dispatch<EntityAcceptedActions>, query: string, currentPage: number, appState: IAppState) => {\r\n\t\tdispatch({ type: EntityActionTypes.SET_LOADING, loading: true })\r\n\t\ttry {\r\n\t\t\t// const response = await API.get(`page=${this.page}&page_size=${this.pageSize}`);\r\n\t\t\tconst response = await this.storageService.getPageEntites(query, this.pageSize, currentPage)\r\n\t\t\tconst { pageEntities, pageCount } = response.data.results\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: EntityActionTypes.GET_ENTITIES,\r\n\t\t\t\tpayload: { \r\n\t\t\t\t\tentities: pageEntities, // .map(ent => ({id: ent.id, name: ent.name, only list row columns})), \r\n\t\t\t\t\tpageCount,\r\n\t\t\t\t\tappState \r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tdispatch({ type: EntityActionTypes.SET_LOADING, loading: false })\r\n\t\t}\r\n\t\tcatch(error) {\r\n\t\t\tdispatch({ type: EntityActionTypes.FAIL, error })\r\n\t\t}\r\n\t}\r\n\r\n\tdisplayEntity = async (dispatch: Dispatch<EntityAcceptedActions>, id: number) => {\r\n\t\tdispatch({ type: EntityActionTypes.SET_LOADING, loading: true })\r\n\t\ttry {\r\n\t\t\t// const response = await API.get(`${id}`);\r\n\t\t\tconst response = await this.storageService.getEntity(id)\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: EntityActionTypes.DISPLAY,\r\n\t\t\t\tentity: response.data.results\r\n\t\t\t})\r\n\t\t\tdispatch({ type: EntityActionTypes.SET_LOADING, loading: false })\r\n\t\t}\r\n\t\tcatch(error) {\r\n\t\t\tdispatch({ type: EntityActionTypes.FAIL, error })\r\n\t\t}\r\n\t}\r\n\r\n\teditEntity = async (dispatch: Dispatch<EntityAcceptedActions>, id: number) => {\r\n\t\tdispatch({ type: EntityActionTypes.SET_LOADING, loading: true })\r\n\t\ttry {\r\n\t\t\t// const response = await API.get(`${id}`);\r\n\t\t\tconst response = await this.storageService.getEntity(id)\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: EntityActionTypes.EDIT,\r\n\t\t\t\tentity: response.data.results\r\n\t\t\t})\r\n\t\t\tdispatch({ type: EntityActionTypes.SET_LOADING, loading: false })\r\n\t\t}\r\n\t\tcatch(error) {\r\n\t\t\tdispatch({ type: EntityActionTypes.FAIL, error })\r\n\t\t}\r\n\t}\r\n\r\n\tremoveEntity = async (dispatch: Dispatch<EntityAcceptedActions>, id: number) => {\r\n\t\tdispatch({ type: EntityActionTypes.SET_LOADING, loading: true })\r\n\t\ttry {\r\n\t\t\t// const response = await this.API.delete(`${id}`);\r\n\t\t\t// const response = \r\n\t\t\tawait this.storageService.removeEntity(id)\r\n\t\t\tdispatch({ type: EntityActionTypes.REMOVE, id })\r\n\t\t\tdispatch({ type: EntityActionTypes.SET_LOADING, loading: false })\r\n\t\t}\r\n\t\tcatch(error) {\r\n\t\t\tdispatch({ type: EntityActionTypes.FAIL, error })\r\n\t\t}\r\n\t}\r\n\r\n\tstoreEntity = async (dispatch: Dispatch<EntityAcceptedActions>, entity: IEntity, formMode: string) => {\r\n\t\tdispatch({ type: EntityActionTypes.SET_LOADING, loading: true })\r\n\t\ttry {\r\n\t\t\tif (formMode === 'add') {\r\n\t\t\t\t// const response = this.API.post({ entity })\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// const response = this.API.put({ entity })\r\n\t\t\t}\r\n\t\t\tconst response = await this.storageService.storeEntity(formMode, entity)\r\n\t\t\tdispatch({ type: EntityActionTypes.STORE, entity: response.data.results })\r\n\t\t\tdispatch({ type: EntityActionTypes.SET_LOADING, loading: false })\r\n\t\t}\r\n\t\tcatch(error) {\r\n\t\t\tdispatch({ type: EntityActionTypes.FAIL, error })\r\n\t\t}\r\n\r\n}\r\n\r\n\r\n\t/*\r\n\t * if you want to override these methods in useStudent\r\n\t *\r\n\r\n\tconst getEntites = useCallback(\r\n\t\t(dispatch: Dispatch<any>, query: string, currentPage: number, appState: IAppState) => { \r\n\t\t\treturn entityActions.getEntites(dispatch, query, currentPage, appState) \r\n\t\t}, []\r\n\t)\r\n\t\r\n\tconst displayEntity = useCallback(\r\n\t\t(dispatch: Dispatch<any>, id: number) => { return entityActions.displayEntity(dispatch, id) }\r\n\t\t, []\r\n\t)\r\n\r\n\tconst editEntity = useCallback(\r\n\t\t(dispatch: Dispatch<any>, id: number) => { return entityActions.editEntity(dispatch, id) }\r\n\t\t, []\r\n\t)\r\n\r\n\tconst removeEntity = useCallback(\r\n\t\t(dispatch: Dispatch<any>, id: number) => { return entityActions.removeEntity(dispatch, id) }\r\n\t\t, []\r\n\t)\r\n\r\n\tconst storeEntity = useCallback(\r\n\t\t(dispatch: Dispatch<any>, entity: IEntity) => { \r\n\t\t\treturn entityActions.storeEntity(dispatch, entity, state.formMode) \r\n\t\t}, [state.formMode]\r\n\t)\r\n\r\n\t*/\r\n\r\n}","import React from \"react\";\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faWindowClose, faEdit } from '@fortawesome/free-solid-svg-icons'\r\n\r\nimport { useHover } from \"../Common/useHover\";\r\nimport { IEntity } from \"./types\";\r\n\r\ninterface IRowProps<T> {\r\n\tentity: T,\r\n\trenderColumns: (item: T) => JSX.Element[],\r\n\tdisplay: (id: number) => void,\r\n\tedit: (id: number) => void,\r\n\tremove: (id: number) => void,\r\n}\r\n\r\nexport const EntityRow: <T extends IEntity> \r\n\t\t\t\t\t(props: IRowProps<T>) => React.ReactElement<IRowProps<T>> = (props) => {\r\n\tconst { entity, renderColumns, display, edit, remove } = props;\r\n\tconst { id, name } = entity; // , url \r\n\tconst [hoverRef, hoverProps] = useHover();\r\n\r\n\treturn (\r\n\t\t<ul className=\"entity-columns\" ref={hoverRef}>\r\n\t\t\t{/* <li>{id}</li> */}\r\n\t\t\t<li key={id}>\r\n\t\t\t\t<a href=\"#/\" onClick={(e) => { e.preventDefault(); display(id)  }}>\r\n\t\t\t\t\t{name}\r\n\t\t\t\t</a>\r\n\t\t\t</li>\r\n\r\n\t\t\t\r\n\r\n\t\t\t<li key=\"buttons\">\r\n\t\t\t{hoverProps.isHovered &&\r\n\t\t\t\t<button className=\"button-edit\" title=\"Edit\" onClick={() => edit(id)}>\r\n\t\t\t\t\t<FontAwesomeIcon icon={faEdit} color='lightblue' />\r\n\t\t\t\t</button>\r\n\t\t\t}\r\n\t\t\t{hoverProps.isHovered &&\r\n\t\t\t\t<button className=\"button-remove\" title=\"Remove\" onClick={() => { remove(id) }}>\r\n\t\t\t\t\t<FontAwesomeIcon icon={faWindowClose}  color='lightblue' />\r\n\t\t\t\t</button>\r\n\t\t\t}\r\n\t\t\t</li>\r\n\r\n\t\t\t{ renderColumns(entity) }\r\n\t\t</ul>\r\n\t)\r\n};\r\n","import React, { createContext, useContext } from 'react';\r\nimport jsonGrades from \"../Grades/Grades.json\"\r\nimport { IAppState } from './types';\r\n\r\nconst initialState: IAppState = { \r\n\tgradesAll: []\r\n};\r\n\r\nexport interface IAppContext {\r\n\tstate: IAppState;\r\n}\r\n\r\nlet AppContext: React.Context<IAppContext>;\r\n\r\ninterface IProps {\r\n\tchildren: React.ReactNode\r\n}\r\n\r\n\r\nexport const AppProvider: React.FC<IProps> = ({ children }) => {\r\n\tconst state = initialState\r\n\r\n\tconst addGrades = () => {\r\n\t\tconst { gradesAll } = state;\r\n\t\tjsonGrades.map(grade => \r\n\t\t\tgradesAll[grade.id] = { ...grade, words: grade.name.split(',')}\r\n\t\t)\r\n\t}\r\n\t\r\n\tif (AppContext === undefined) {\r\n\t\taddGrades();\r\n\t\tAppContext = createContext<IAppContext>({ state })\r\n\t}\r\n\r\n  \treturn (\r\n   \t<AppContext.Provider value={{ state }}>\r\n   \t\t{children}\r\n   \t</AppContext.Provider>\r\n  \t)\r\n}\r\n\r\nexport const useApp = () => useContext(AppContext);","import { IStudentGradeIds, IStudent } from \"./types\";\r\nimport { IAppState } from \"../AppData/types\";\r\n\r\nexport enum StudentActionTypes {\r\n\tGET_ENTITIES = 'GET_ENTITIES', // override entity\r\n\tSTUDENT_ASSIGN_GRADE = 'STUDENT_ASSIGN_GRADE',\r\n\tSTUDENT_REMOVE_GRADE = 'STUDENT_REMOVE_GRADE'\r\n}\r\n\r\nexport interface IStudentGetEntities {\r\n\ttype: StudentActionTypes.GET_ENTITIES;\r\n\tpayload: {\r\n\t\tentities: IStudent[]; \r\n\t\tpageCount: number;\r\n\t\tappState: IAppState;\r\n\t}\r\n}\r\n\r\nexport interface IAssignGrade {\r\n\ttype: StudentActionTypes.STUDENT_ASSIGN_GRADE, \r\n\tstudentGradeIds: IStudentGradeIds\r\n}\r\n\r\nexport interface IRemoveGrade {\r\n\ttype: StudentActionTypes.STUDENT_REMOVE_GRADE, \r\n\tstudentGradeIds: IStudentGradeIds\r\n}\r\n\r\n\r\nexport type StudentAcceptedActions = IStudentGetEntities | IAssignGrade | IRemoveGrade\r\n","import { useRef, useState, useEffect } from 'react';\r\n\r\ninterface IHoverProps {\r\n\tisHovered: boolean;\r\n}\r\n\r\n// Hook\r\nexport function useHover() : [React.RefObject<HTMLUListElement>, IHoverProps] {\r\n\tconst [hoverProps, setValue] = useState({ isHovered: false });\r\n \r\n\tconst divRef = useRef<HTMLUListElement>(null);\r\n \r\n\tconst handleMouseOver = () => setValue({ isHovered: true });\r\n\tconst handleMouseOut = () => setValue({ isHovered: false });\r\n \r\n\tuseEffect(\r\n\t  () => {\r\n\t\t const node = divRef.current;\r\n\t\t if (node) {\r\n\t\t\tnode.addEventListener('mouseenter', () => handleMouseOver());\r\n\t\t\tnode.addEventListener('mouseleave', () => handleMouseOut());\r\n \r\n\t\t\treturn () => {\r\n\t\t\t\tnode.removeEventListener('mouseenter', () => handleMouseOver());\r\n\t\t\t\tnode.removeEventListener('mouseleave', () => handleMouseOut());\r\n\t\t\t};\r\n\t\t }\r\n\t  }, [divRef.current] // Recall only if ref changes\r\n\t);\r\n \r\n\treturn [divRef, hoverProps];\r\n}\r\n\r\n","import React, { Dispatch } from \"react\";\r\nimport ReactPaginate from 'react-paginate';\r\n\r\nimport { EntityActionTypes } from \"./actions\";\r\nimport { EntityRow } from \"./EntityRow\";\r\nimport { IEntity } from \"./types\";\r\n\r\n\r\ninterface IProps<T extends IEntity> {\r\n\tentities: T[],\r\n\tdispatch: Dispatch<any>,\r\n\tdisplayEntity: (dispatch: Dispatch<any>, id: number) => void,\r\n\teditEntity: (dispatch: Dispatch<any>, id: number) => void,\r\n\tremoveEntity: (dispatch: Dispatch<any>, id: number) => void,\r\n\trenderColumns: (item: T) => JSX.Element[],\r\n\tcurrentPage: number,\r\n\tpageCount: number,\r\n\t// pageRangeDisplayed: number;\r\n\t// marginPagesDisplayed: number;\r\n}\r\n\r\nexport const EntityList: <T extends IEntity>\r\n\t\t\t\t\t(props: IProps<T>) => React.ReactElement<IProps<T>> = (props) => {\r\n\tconst { \r\n\t\tentities, \r\n\t\tdisplayEntity, editEntity, removeEntity,\r\n\t\tdispatch, renderColumns,\r\n\t\tpageCount //, pageRangeDisplayed, marginPagesDisplayed, \r\n\t} = props;\r\n\r\n\tconst display = (id: number) => displayEntity(dispatch, id);\r\n\tconst edit = (id: number) => editEntity(dispatch, id);\r\n\tconst remove = (id: number) => removeEntity(dispatch, id);\r\n\r\n\treturn (\r\n   \t<div style={{border: '0px solid lightblue'}}>\r\n\t\t\t<ul className=\"entity-list\">\r\n\t\t\t\t{entities.map(entity => (\r\n\t\t\t\t\t<li key={entity.id}>\r\n\t\t\t\t\t\t<EntityRow\r\n\t\t\t\t\t\t\tentity={entity}\r\n\t\t\t\t\t\t\trenderColumns={renderColumns}\r\n\t\t\t\t\t\t\tdisplay={display}\r\n\t\t\t\t\t\t\tedit={edit}\r\n\t\t\t\t\t\t\tremove={remove}\r\n\t\t\t\t\t\t/>\t\r\n\t\t\t\t\t</li>\r\n\t\t\t\t))}\r\n\t\t\t</ul>\r\n\r\n\t\t\t<div id=\"react-paginate\">\r\n\t\t\t\t<ReactPaginate\r\n\t\t\t\t\tpreviousLabel={\"← Previous\"}\r\n\t\t\t\t\tnextLabel={\"Next →\"}\r\n\t\t\t\t\tbreakLabel={<span className=\"gap\">...</span>}\r\n\t\t\t\t\tpageCount={pageCount}\r\n\t\t\t\t\tonPageChange={(selectedItem: { selected: number }) => \r\n\t\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\t\ttype: EntityActionTypes.GO_TO_PAGE,\r\n\t\t\t\t\t\t\tpage: selectedItem.selected\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// forcePage={currentPage}\r\n\t\t\t\t\tcontainerClassName={\"pagination\"}\r\n\t\t\t\t\tpreviousLinkClassName={\"previous_page\"}\r\n\t\t\t\t\tnextLinkClassName={\"next_page\"}\r\n\t\t\t\t\tdisabledClassName={\"disabled\"}\r\n\t\t\t\t\tactiveClassName={\"active\"}\r\n\t\t\t\t\tmarginPagesDisplayed={2}\r\n\t\t\t\t\tpageRangeDisplayed={5}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\r\n\t\t\t<button onClick={() => dispatch({ type: EntityActionTypes.ADD })}>Add new</button>\t\t\t\r\n\t\t</div>\r\n  )\r\n}","import React from 'react';\r\nimport { useFormik } from 'formik';\r\nimport * as Yup from 'yup'\r\nimport { IStudent } from '../types';\r\n\r\ninterface IFormProps {\r\n\tentity: IStudent;\r\n\tformMode: string;\r\n\tcanEdit: boolean;\r\n\tcancel: () => void;\r\n\tsaveForm: (student: IStudent) => void;\r\n\tedit: () => void;\r\n\tremove: () => void;\t\r\n }\r\n\r\nexport const MyForm: React.FC<IFormProps> = (props: IFormProps) => {\r\n  const formik = useFormik({\r\n\tenableReinitialize: true,\r\n   initialValues: {\r\n\t\tfromMode: props.formMode,\r\n\t\tcanEdit: props.canEdit,\r\n      id: props.entity.id,\r\n\t\turl: props.entity.url,\r\n\t\tcode: props.entity.code,\r\n\t\tavatar: props.entity.avatar,\r\n\t\tname: props.entity.name,\r\n\t\temail: props.entity.email,\r\n\t\ttypes: props.entity.types,\r\n   },\r\n   validationSchema: Yup.object({\r\n      code: Yup.string()\r\n        .max(150, 'Must be 150 characters or less')\r\n        .required('Required'),\r\n   }),\r\n   onSubmit: (values) => {\r\n\t\t// values.name = values.firstName.trim() + ' ' + values.lastName.trim()\r\n\t\t// alert(JSON.stringify(values, null, 2));\r\n\t\tprops.saveForm(values)\r\n   },\r\n  });\r\n\r\n  return (\r\n    <form onSubmit={formik.handleSubmit}>\r\n\t\t { props.formMode !== 'add' && \r\n\t\t <>\r\n\t\t\t<label htmlFor=\"id\">Student id</label>\r\n\t\t\t<input\r\n\t\t\tid=\"id\"\r\n\t\t\tname=\"id\"\r\n\t\t\ttype=\"text\"\r\n\t\t\tonChange={formik.handleChange}\r\n\t\t\tonBlur={formik.handleBlur}\r\n\t\t\tvalue={formik.values.id}\r\n\t\t\tdisabled\r\n\t\t\tstyle={{width: '50px'}}\r\n\t\t\t/>\r\n\t\t\t{formik.touched.id && formik.errors.id ? (\r\n\t\t\t<div>{formik.errors.id}</div>\r\n\t\t\t) : null}\r\n\t\t\t</>\r\n\t\t}\r\n\r\n\t\t<label htmlFor=\"name\">Name</label>\r\n      <input\r\n        id=\"name\"\r\n        name=\"name\"\r\n        type=\"text\"\r\n        onChange={formik.handleChange}\r\n        onBlur={formik.handleBlur}\r\n\t\t  value={formik.values.name}\r\n\t\t  disabled = {props.formMode === 'display'}\r\n      />\r\n      {formik.touched.name && formik.errors.name ? (\r\n        <div>{formik.errors.name}</div>\r\n      ) : null}\r\n\r\n      <label htmlFor=\"code\">Code</label>\r\n      <input\r\n        id=\"code\"\r\n        name=\"code\"\r\n        type=\"text\"\r\n        onChange={formik.handleChange}\r\n        onBlur={formik.handleBlur}\r\n\t\t  value={formik.values.code}\r\n\t\t  disabled = {props.formMode === 'display'}\r\n      />\r\n      {formik.touched.code && formik.errors.code ? (\r\n        <div>{formik.errors.code}</div>\r\n      ) : null}\r\n\r\n\t\t<label htmlFor=\"lastName\">Avatar</label>\r\n      <input\r\n        id=\"avtar\"\r\n        name=\"avtar\"\r\n        type=\"text\"\r\n        onChange={formik.handleChange}\r\n        onBlur={formik.handleBlur}\r\n\t\t  value={formik.values.avatar}\r\n\t\t  disabled = {props.formMode === 'display'}\r\n      />\r\n      {formik.touched.avatar && formik.errors.avatar ? (\r\n        <div>{formik.errors.avatar}</div>\r\n      ) : null}\t\t\r\n\r\n\t\t<label htmlFor=\"email\">Email</label>\r\n      <input\r\n        id=\"email\"\r\n        name=\"email\"\r\n        type=\"text\"\r\n        onChange={formik.handleChange}\r\n        onBlur={formik.handleBlur}\r\n\t\t  value={formik.values.email}\r\n\t\t  disabled = {props.formMode === 'display'}\r\n      />\r\n      {formik.touched.email && formik.errors.email ? (\r\n        <div>{formik.errors.email}</div>\r\n      ) : null}\t\t\r\n\r\n\r\n\t\t{ props.formMode !== 'display' &&\r\n\t\t\t<>\r\n\t\t\t<button onClick={() => props.cancel()}>Cancel</button>\r\n      \t<button type=\"submit\">Save</button>\r\n\t\t\t</>\r\n\t\t}\r\n\r\n\t\t{ props.canEdit && props.formMode === 'display' &&\r\n\t\t\t<>\r\n\t\t\t\t<button onClick={(e) => { e.preventDefault(); props.edit() }}>Edit</button>\r\n\t\t\t\t<button onClick={(e) => { e.preventDefault(); props.remove() }}>Remove</button>\r\n\t\t\t</>\r\n\t\t}\t\t\t\t\r\n\r\n    </form>\r\n  );\r\n};\r\n\r\n","import React from 'react';\r\nimport { useStudent } from '../useStudent';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\n\r\nimport { faWindowClose } from '@fortawesome/free-solid-svg-icons'\r\n\r\nimport { EntityActionTypes} from '../../Entity/actions'\r\nimport { MyForm } from './MyForm';\r\n\r\ninterface IProps {\r\n}\r\n\r\nexport const StudentForm: React.FC<IProps> = (props: IProps) => {\r\n\tconst { state, dispatch, editEntity, removeEntity, storeEntity } = useStudent();\r\n\tconst { entity, formMode, canEdit } = state;\r\n\r\n\tlet title: string = ''\r\n\tswitch (state.formMode) {\r\n\t\tcase 'display':\r\n\t\t\ttitle = 'Student';\r\n\t\t\tbreak;\r\n\t\tcase 'edit':\r\n\t\t\ttitle = 'Edit Student';\r\n\t\t\tbreak;\r\n\t\tcase 'add':\r\n\t\t\ttitle = 'New Student';\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tbreak;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"formik-example formik-example--blue\">\r\n\t\t{ entity && \r\n\t\t\t<div style={{border: '1px solid silver', borderRadius: '5px', padding: '10px'}}>\r\n\t\t\t\t<h4 style={{marginTop: 0}}>{title}</h4>\r\n\t\t\t\t<button \r\n\t\t\t\t\tstyle={{float:'right'}}\r\n\t\t\t\t\tclassName=\"button-remove\"\r\n\t\t\t\t\ttitle=\"Close\"\r\n\t\t\t\t\tonClick={() => { dispatch( {type: EntityActionTypes.CLOSE_FORM} )}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<FontAwesomeIcon icon={faWindowClose} size=\"2x\" color='lightblue' />\r\n\t\t\t\t</button>\t\t\t\t\r\n\t\t\t\t<MyForm {...props}\r\n\t\t\t\t\tentity={entity!} \r\n\t\t\t\t\tformMode={formMode}\r\n\t\t\t\t\tcanEdit={canEdit}\r\n\t\t\t\t\tcancel = {() => dispatch( {type: EntityActionTypes.CANCEL} )}\r\n\t\t\t\t\tsaveForm = {(student) => storeEntity(dispatch, student, formMode) }\r\n\t\t\t\t\tedit = {() => editEntity(dispatch, entity!.id)}\r\n\t\t\t\t\tremove = {() => removeEntity(dispatch, entity!.id)}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t}\r\n\t\t</div>\r\n\t)\r\n}","import React, { useEffect } from \"react\";\r\n\r\nimport { StudentProvider, useStudent } from \"./useStudent\";\r\n\r\nimport { EntityList } from \"../Entity/EntityList\";\r\nimport { StudentForm } from \"./components/StudentForm\";\r\n\r\nimport { IStudent } from \"./types\";\r\nimport { useApp } from \"../AppData/useApp\";\r\n\r\ninterface IPageProps {\r\n}\r\n\r\nexport const Page: React.FC<IPageProps> = (props: IProps) => {\r\n\tconst { state: appState } = useApp();\r\n\t\r\n\tconst { state, dispatch, getEntites, displayEntity, editEntity, removeEntity } = useStudent();\r\n\tconst { query, entities, currentPage, pageCount } = state;\r\n\t\r\n\tuseEffect(() => {\r\n\t\tgetEntites(dispatch, query, currentPage, appState);\r\n\t\tconsole.log(\"getEntites\", currentPage)\r\n\t}, [dispatch, getEntites, query, currentPage, appState]);\r\n\t\r\n\r\n  \treturn (\r\n\t\t<div className=\"two-columns\">\r\n\t\t\t<div className=\"a\">\r\n\t\t\t\t<h3>Students</h3>\r\n\t\t\t\t<EntityList \r\n\t\t\t\t\tentities={entities}\r\n\t\t\t\t\tdispatch={dispatch}\r\n\t\t\t\t\tdisplayEntity={displayEntity}\r\n\t\t\t\t\teditEntity={editEntity}\r\n\t\t\t\t\tremoveEntity={removeEntity}\r\n\t\t\t\t\tcurrentPage={currentPage}\r\n\t\t\t\t\tpageCount={pageCount}\r\n\t\t\t\t\trenderColumns = {(entity: IStudent) => [\r\n\t\t\t\t\t\t<li key=\"types\" style={{minWidth: '60%'}}>{entity.types.join(', ')}</li>,\r\n\t\t\t\t\t\t<li key=\"img\"><img src={entity.avatar} style={{height: '30px'}} alt=\"Slika\"></img></li>\r\n\t\t\t\t\t]}\r\n\t\t\t\t />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"b\">\r\n\t\t\t\t<StudentForm />\r\n\t\t\t</div>\r\n\t\t</div>    \t\t\r\n  );\r\n}\r\n\r\n\r\ninterface IProps {\r\n}\r\n\r\nexport const StudentPage: React.FC<IProps> = () => {\r\n  return (\r\n    <StudentProvider>\r\n\t\t <Page />\r\n    </StudentProvider>\r\n  );\r\n}\r\n\r\n","import { IStudentState, IStudent, IStudentGrade } from \"./types\";\r\nimport { entityReducer } from \"../Entity/entityReducer\";\r\nimport { StudentActionTypes, StudentAcceptedActions } from \"./actions\";\r\nimport { EntityAcceptedActions } from \"../Entity/actions\";\r\nimport { IGrade } from \"../Grades/types\";\r\nimport { IAppState } from \"../AppData/types\";\r\n\r\nexport const initialStudent: IStudent = { \r\n\tid: 0, \r\n\tname: '',\r\n\turl: '',\r\n\tcode: '',\r\n\temail: '',\r\n\tavatar: 'https://img.pokemondb.net/artwork/diglett.jpg',\r\n\ttypes: [],\r\n\tgrades: []\r\n};\r\n\r\nexport const combineReducers: (\r\n\t\tentityReducer: React.Reducer<IStudentState, EntityAcceptedActions>, \r\n\t\tstudentReducer: React.Reducer<IStudentState, StudentAcceptedActions>) => \r\n\t\t\tReact.Reducer<\r\n\t\t\t\tIStudentState, \r\n\t\t\t\tEntityAcceptedActions & StudentAcceptedActions\r\n\t\t\t> = (entityReducer, studentReducer) => {\r\n\treturn (prevState, action) => {\r\n\t\t\r\n\t\t// when action is overriden in studentReducer, no need to call entityReducer\r\n\t\tif (action.type in StudentActionTypes)\r\n\t\t\treturn studentReducer(prevState, action)\r\n\r\n\t\tconst state = entityReducer(prevState, action);\r\n\t\treturn studentReducer(state, action)\r\n\t};\t\r\n}\r\n\r\nconst studentJoins = (student: IStudent, appState: IAppState) : IStudentGrade[]=> {\r\n\tconst gradesAll: Record<number, IGrade> = appState.gradesAll\r\n\tif (student === undefined || student.grades.length === 0)\r\n\t\treturn [];\r\n\treturn student\r\n\t\t\t\t.grades.map(sg => ({ ...sg, name: gradesAll[sg.gradeId].name }))\r\n}\r\n\r\nexport const studentReducer: (initialEntity: IStudent) => \r\n\t\t\t\t\tReact.Reducer<IStudentState, StudentAcceptedActions> = (initialEntity) => {\r\n\treturn (state, action) =>  {\r\n\t\tswitch(action.type) {\r\n\r\n\t\t\tcase StudentActionTypes.GET_ENTITIES:  {\r\n\t\t\t\tconst { entities, pageCount, appState } = action.payload;\r\n\t\t\t\tentities.map(student => student.grades = studentJoins(student, appState));\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tentities,\r\n\t\t\t\t\tpageCount\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tcase StudentActionTypes.STUDENT_ASSIGN_GRADE: {\r\n\t\t\t\tconst { studentId, gradeId, gradeName } = action.studentGradeIds\r\n\t\t\t\tconst students = state.entities.map(student => \r\n\t\t\t\t\tstudent.id !== studentId ?\r\n\t\t\t\t\t\t{...student} :\r\n\t\t\t\t\t\t{...student, grades: [...student.grades, { \r\n\t\t\t\t\t\t\t\tname: gradeName,\r\n\t\t\t\t\t\t\t\tgradeId,\r\n\t\t\t\t\t\t\t\tgrade: 0\r\n\t\t\t\t\t\t\t}]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t)\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tentities: students,\r\n\t\t\t\t\tentity: { ...students.find(student => student.id === studentId)! }\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t}\r\n\t\r\n\t\t\tcase StudentActionTypes.STUDENT_REMOVE_GRADE: {\r\n\t\t\t\tconst { studentId, gradeId } = action.studentGradeIds\r\n\t\t\t\tconst students = state.entities.map(student => \r\n\t\t\t\t\tstudent.id !== studentId ?\r\n\t\t\t\t\t\t{...student} :\r\n\t\t\t\t\t\t{...student, grades: student.grades.filter(grade=>grade.gradeId !== gradeId)}\r\n\t\t\t\t)\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tentities: students,\r\n\t\t\t\t\tentity: { ...students.find(student => student.id === studentId)! }\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\r\n\t\t\tdefault:\r\n\t\t\t\t//\tthrow new Error(`Unhandled action type: ${action!.type}`);\r\n\t\t\t\t// when combine reducers \r\n\t\t\t\treturn state\r\n\t\t}\t\t\r\n\t}\r\n}\r\n\r\nexport const Reducer = combineReducers(entityReducer(initialStudent), studentReducer(initialStudent));\r\n","\r\nimport React, { createContext, useContext, useReducer, Dispatch, useCallback } from 'react';\r\nimport { IStudentState } from './types';\r\nimport { Reducer } from './studentReducer';\r\nimport { EntityActions } from '../Entity/EntityActions';\r\nimport jsonStudents from './Students.json'\r\nimport { IAppState } from '../AppData/types';\r\n\r\n\r\nconst initialState: IStudentState = { \r\n\tentities: [],\r\n\tloading: false,\r\n\tformMode: 'display',\r\n\tcanEdit: true,\r\n\tquery: '',\r\n\tpageCount: 0,\r\n\tcurrentPage: 0\r\n};\r\n\r\nexport interface IStudentContext {\r\n\tstate: IStudentState;\r\n\tdispatch: Dispatch<any>; // AcceptedActions & StudentAcceptedActions>;\r\n}\r\n\r\nlet StudentContext: React.Context<IStudentContext>;\r\n\r\ninterface IProps {\r\n\tchildren: React.ReactNode\r\n}\r\n\r\nexport const StudentProvider: React.FC<IProps> = ({ children }) => {\r\n\tconst [state, dispatch] = useReducer(Reducer, initialState)\r\n\r\n\tif (StudentContext === undefined) {\r\n\t\t\r\n\t\tentityActions = new EntityActions({\r\n\t\t\tstorageName: 'StudentGrades',\r\n\t\t\tgetFromJSON: () => [...jsonStudents],\r\n\t\t\tpageSize: pageSize,\r\n\t\t\tbaseURL: 'https//abc.com/students/'\r\n\t\t});\r\n\t\t\r\n\t\tStudentContext = createContext<IStudentContext>({ state, dispatch })\r\n\t}\r\n\r\n  \treturn (\r\n   \t<StudentContext.Provider value={{ state, dispatch }}>\r\n   \t\t{children}\r\n   \t</StudentContext.Provider>\r\n  \t)\r\n}\r\n\r\nconst pageSize = 9;\r\n\r\nlet entityActions: EntityActions;\r\n\r\nexport const useStudent = () => {\r\n\tconst context = useContext(StudentContext);\r\n\tif (!context) {\r\n\t\tthrow new Error('useStudent must be used within a StudentProvider')\r\n\t}\r\n\r\n\tconst { state, dispatch } = context;\r\n\r\n\tconst {\r\n\t\tnamesALL,\r\n\t\t// getEntites, \r\n\t\tdisplayEntity, \r\n\t\teditEntity, \r\n\t\tremoveEntity, \r\n\t\tstoreEntity,\r\n\t} = entityActions;\r\n\r\n\t// the way to override entity Actions\r\n\tconst getEntites = useCallback(\r\n\t\t(dispatch: Dispatch<any>, query: string, currentPage: number, appState: IAppState) => { \r\n\t\t\treturn entityActions.getEntites(dispatch, query, currentPage, appState) \r\n\t\t}, []\r\n\t)\r\n\r\n\r\n\treturn { state, dispatch, namesALL, getEntites, displayEntity, editEntity, removeEntity, storeEntity };\r\n}\r\n","import React from 'react';\r\nimport { useFormik } from 'formik';\r\nimport * as Yup from 'yup'\r\nimport { IStudent } from '../types';\r\n\r\ninterface IFormProps {\r\n\tentity: IStudent;\r\n\tformMode: string;\r\n\tcanEdit: boolean;\r\n\tcancel: () => void;\r\n\tsaveForm: (student: IStudent) => void;\r\n\tedit: () => void;\r\n\tremove: () => void;\t\r\n }\r\n\r\nexport const MyForm: React.FC<IFormProps> = (props: IFormProps) => {\r\n  const formik = useFormik({\r\n\tenableReinitialize: true,\r\n   initialValues: {\r\n\t\tfromMode: props.formMode,\r\n\t\tcanEdit: props.canEdit,\r\n      id: props.entity.id,\r\n\t\turl: props.entity.url,\r\n\t\tcode: props.entity.code,\r\n\t\tavatar: props.entity.avatar,\r\n\t\tname: props.entity.name,\r\n\t\temail: props.entity.email,\r\n\t\ttypes: props.entity.types,\r\n\t\tgrades: props.entity.grades\r\n   },\r\n   validationSchema: Yup.object({\r\n      code: Yup.string()\r\n        .max(150, 'Must be 150 characters or less')\r\n        .required('Required'),\r\n   }),\r\n   onSubmit: (values) => {\r\n\t\t// values.name = values.firstName.trim() + ' ' + values.lastName.trim()\r\n\t\t// alert(JSON.stringify(values, null, 2));\r\n\t\tprops.saveForm(values)\r\n   },\r\n  });\r\n\r\n  return (\r\n    <form onSubmit={formik.handleSubmit}>\r\n\t\t { props.formMode !== 'add' && \r\n\t\t <>\r\n\t\t\t<label htmlFor=\"id\">Student id</label>\r\n\t\t\t<input\r\n\t\t\tid=\"id\"\r\n\t\t\tname=\"id\"\r\n\t\t\ttype=\"text\"\r\n\t\t\tonChange={formik.handleChange}\r\n\t\t\tonBlur={formik.handleBlur}\r\n\t\t\tvalue={formik.values.id}\r\n\t\t\tdisabled\r\n\t\t\tstyle={{width: '50px'}}\r\n\t\t\t/>\r\n\t\t\t{formik.touched.id && formik.errors.id ? (\r\n\t\t\t<div>{formik.errors.id}</div>\r\n\t\t\t) : null}\r\n\t\t\t</>\r\n\t\t}\r\n\r\n\t\t<label htmlFor=\"name\">Name</label>\r\n      <input\r\n        id=\"name\"\r\n        name=\"name\"\r\n        type=\"text\"\r\n        onChange={formik.handleChange}\r\n        onBlur={formik.handleBlur}\r\n\t\t  value={formik.values.name}\r\n\t\t  disabled = {props.formMode === 'display'}\r\n      />\r\n      {formik.touched.name && formik.errors.name ? (\r\n        <div>{formik.errors.name}</div>\r\n      ) : null}\r\n\r\n      <label htmlFor=\"code\">Code</label>\r\n      <input\r\n        id=\"code\"\r\n        name=\"code\"\r\n        type=\"text\"\r\n        onChange={formik.handleChange}\r\n        onBlur={formik.handleBlur}\r\n\t\t  value={formik.values.code}\r\n\t\t  disabled = {props.formMode === 'display'}\r\n      />\r\n      {formik.touched.code && formik.errors.code ? (\r\n        <div>{formik.errors.code}</div>\r\n      ) : null}\r\n\r\n\t\t<label htmlFor=\"lastName\">Avatar</label>\r\n      <input\r\n        id=\"avtar\"\r\n        name=\"avtar\"\r\n        type=\"text\"\r\n        onChange={formik.handleChange}\r\n        onBlur={formik.handleBlur}\r\n\t\t  value={formik.values.avatar}\r\n\t\t  disabled = {props.formMode === 'display'}\r\n      />\r\n      {formik.touched.avatar && formik.errors.avatar ? (\r\n        <div>{formik.errors.avatar}</div>\r\n      ) : null}\t\t\r\n\r\n\t\t<label htmlFor=\"email\">Email</label>\r\n      <input\r\n        id=\"email\"\r\n        name=\"email\"\r\n        type=\"text\"\r\n        onChange={formik.handleChange}\r\n        onBlur={formik.handleBlur}\r\n\t\t  value={formik.values.email}\r\n\t\t  disabled = {props.formMode === 'display'}\r\n      />\r\n      {formik.touched.email && formik.errors.email ? (\r\n        <div>{formik.errors.email}</div>\r\n      ) : null}\t\t\r\n\r\n\r\n\t\t{ props.formMode !== 'display' &&\r\n\t\t\t<>\r\n\t\t\t<button onClick={() => props.cancel()}>Cancel</button>\r\n      \t<button type=\"submit\">Save</button>\r\n\t\t\t</>\r\n\t\t}\r\n\r\n\t\t{ props.canEdit && props.formMode === 'display' &&\r\n\t\t\t<>\r\n\t\t\t<button onClick={() => props.edit()}>Edit</button>\r\n\t\t\t<button onClick={() => props.remove()}>Remove</button>\r\n\t\t\t</>\r\n\t\t}\t\t\t\t\r\n\r\n    </form>\r\n  );\r\n};\r\n\r\n","import React from \"react\";\r\n \r\ntype OptionValue = string | number;\r\n\r\nexport type Option<T extends OptionValue> = {\r\n  value: T;\r\n  label: string;\r\n};\r\n\r\ntype Props<T extends OptionValue> = {\r\n  options: Option<T>[];\r\n  value: T;\r\n  onChange: (value: T) => void;\r\n};\r\n\r\nexport function Select<T extends OptionValue>(props: Props<T>) {\r\n  function handleOnChange(e: React.FormEvent<HTMLSelectElement>) {\r\n    const { selectedIndex } = e.currentTarget;\r\n    const selectedOption = props.options[selectedIndex];\r\n    props.onChange(selectedOption.value);\r\n  }\r\n  return (\r\n    <select value={props.value} onChange={handleOnChange}>\r\n      {props.options.map(option => (\r\n        <option key={option.value} value={option.value}>\r\n          {option.label}\r\n        </option>\r\n      ))}\r\n    </select>\r\n  );\r\n}","import * as React from 'react';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faWindowClose } from '@fortawesome/free-solid-svg-icons'\r\n\r\nimport { useStudent } from '../useStudent';\r\nimport { Select } from '../../Common/Select';\r\nimport { IGrade } from '../../Grades/types';\r\n\r\nimport { Option } from '../../Common/Select'\r\nimport { useApp } from '../../AppData/useApp';\r\nimport { StudentActionTypes } from '../actions';\r\n\r\ninterface IProps {\r\n}\r\n\r\nconst StudentGrades: React.FC<IProps> = (props: IProps) => {\r\n\tconst { state: appState } = useApp();\r\n\tconst { gradesAll } = appState;\r\n\r\n\tconst { state, dispatch } = useStudent();\r\n\tconst { entity: student, formMode, canEdit } = state;\r\n\tconst { grades } = student!;\r\n\r\n\tlet options: Option<number>[] = [];\r\n\r\n\tif (canEdit) {\r\n\t\tconst already = student!.grades.map(g => g.gradeId);\r\n\t\tconst gradesUnassigned: IGrade[] = Object.values(gradesAll).filter(grade => !already.includes(grade.id))\r\n\t\toptions= gradesUnassigned.map(grade => ({value: grade.id, label: grade.name}))\r\n\t\toptions.unshift({value: 0, label: 'select'})\r\n\t}\r\n\r\n   return (\r\n      <div className=\"name-container\">\r\n\t\t\t{ grades.length === 0 && \r\n\t\t\t\t<div>\r\n\t\t\t\t\tNo grades yet\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t\t{\r\n\t\t\t\t<>\r\n\t\t\t\t<table>\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>Name</th>\r\n\t\t\t\t\t\t\t<th>Grade</th>\r\n\t\t\t\t\t\t\t{ canEdit && formMode !== 'display' && <th></th> }\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t{ grades.length > 0 && grades.map(grade => \r\n\t\t\t\t\t\t\t<tr key={grade.gradeId}>\r\n\t\t\t\t\t\t\t\t<td className=\"name\">\r\n\t\t\t\t\t\t\t\t\t{grade.name}\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td className=\"name\">\r\n\t\t\t\t\t\t\t\t\t{grade.gradeId}\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t{ canEdit && formMode !== 'display' &&\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t<button className=\"button-remove\" title=\"Remove Grade\" \r\n\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => { \r\n\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype: StudentActionTypes.STUDENT_REMOVE_GRADE, \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstudentGradeIds: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstudentId: student!.id,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgradeId: grade.gradeId\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={faWindowClose}  color='lightblue' />\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{canEdit && formMode !== 'display' && \r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\t\toptions={options}\r\n\t\t\t\t\t\t\t\t\t\tvalue={0}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(gradeId: number) => \r\n\t\t\t\t\t\t\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype: StudentActionTypes.STUDENT_ASSIGN_GRADE, \r\n\t\t\t\t\t\t\t\t\t\t\t\tstudentGradeIds: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstudentId: student!.id,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tgradeId: gradeId,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tgradeName: gradesAll[gradeId].name\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t} \r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t\t</tr>}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t\t</>\r\n\t\t\t}\r\n      </div>\r\n   );\r\n  }\r\n\r\nexport default StudentGrades\r\n\r\n","import React from 'react';\r\nimport { useStudent } from '../useStudent';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\n\r\nimport { faWindowClose } from '@fortawesome/free-solid-svg-icons'\r\n\r\nimport { MyForm } from './MyForm';\r\nimport StudentGrades from './StudentGrades';\r\nimport { EntityActionTypes } from '../../Entity/actions';\r\n\r\ninterface IProps {\r\n}\r\n\r\nexport const StudentForm: React.FC<IProps> = (props: IProps) => {\r\n\tconst { state, dispatch, editEntity, removeEntity, storeEntity } = useStudent();\r\n\tconst { entity, formMode, canEdit } = state;\r\n\r\n\tlet title: string = ''\r\n\tswitch (state.formMode) {\r\n\t\tcase 'display':\r\n\t\t\ttitle = 'Student';\r\n\t\t\tbreak;\r\n\t\tcase 'edit':\r\n\t\t\ttitle = 'Edit Student';\r\n\t\t\tbreak;\r\n\t\tcase 'add':\r\n\t\t\ttitle = 'New Student';\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tbreak;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"formik-example formik-example--blue\">\r\n\t\t{ entity && \r\n\t\t\t<div style={{border: '1px solid silver', borderRadius: '5px', padding: '10px'}}>\r\n\t\t\t\t<h4 style={{marginTop: 0}}>{title}</h4>\r\n\t\t\t\t<button \r\n\t\t\t\t\tstyle={{float:'right'}}\r\n\t\t\t\t\tclassName=\"button-remove\"\r\n\t\t\t\t\ttitle=\"Close\"\r\n\t\t\t\t\tonClick={() => { dispatch( {type: EntityActionTypes.CLOSE_FORM} )}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<FontAwesomeIcon icon={faWindowClose} size=\"2x\" color='lightblue' />\r\n\t\t\t\t</button>\t\t\t\t\r\n\t\t\t\t<MyForm {...props}\r\n\t\t\t\t\tentity={entity!} \r\n\t\t\t\t\tformMode={formMode}\r\n\t\t\t\t\tcanEdit={canEdit}\r\n\t\t\t\t\tcancel = {() => dispatch( {type: EntityActionTypes.CANCEL} )}\r\n\t\t\t\t\tsaveForm = {(student) => storeEntity(dispatch, student, formMode) }\r\n\t\t\t\t\tedit = {() => editEntity(dispatch, entity!.id)}\r\n\t\t\t\t\tremove = {() => removeEntity(dispatch, entity!.id)}\r\n\t\t\t\t/>\r\n\t\t\t\t<StudentGrades\t/>\r\n\t\t\t</div>\r\n\t\t}\r\n\t\t</div>\r\n\t)\r\n}","import * as React from 'react';\r\n\r\nimport Autosuggest from 'react-autosuggest';\r\nimport AutosuggestHighlightMatch from \"autosuggest-highlight/match\";\r\nimport AutosuggestHighlightParse from \"autosuggest-highlight/parse\";\r\n\r\nimport './AutoSuggest.css'\r\n\r\n\r\n// https://developer.mozilla.org/en/docs/Web/JavaScript/Guide/Regular_Expression\r\n// s#Using_Special_Characters\r\nfunction escapeRegexCharacters(str: string): string {\r\n\treturn str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\r\n}\r\n\r\n\r\n\r\nconst EntityAutosuggestMulti = Autosuggest as { new (): Autosuggest<string> };\r\n\r\ninterface IProps {\r\n\tnamesALL: string[],\r\n\tonSelectQuery: (query: string) => void \r\n}\r\n\r\nexport class AutoSuggestEntity extends React.Component<IProps, any> {\r\n\r\n\tstate: any;\r\n\r\n\tconstructor(props: any) {\r\n\t\t super(props);\r\n\r\n\t\t this.state = {\r\n\t\t\t  value: '',\r\n\t\t\t  suggestions: this.getSuggestions(''),\r\n\t\t\t  highlighted: ''\r\n\t\t };\r\n\t}\r\n\t// endregion region Rendering methods\r\n\trender(): JSX.Element {\r\n\t\t const {value, suggestions} = this.state;\r\n\r\n\t\t return <EntityAutosuggestMulti\r\n\t\t \t  onSuggestionsClearRequested={this.onSuggestionsClearRequested}  // (sl) added\r\n\t\t\t  multiSection={false}\r\n\t\t\t  suggestions={suggestions}\r\n\t\t\t  onSuggestionsFetchRequested={this.onSuggestionsFetchRequested.bind(this)}\r\n\t\t\t  onSuggestionSelected={this.onSuggestionSelected.bind(this)}\r\n\t\t\t  getSuggestionValue={this.getSuggestionValue.bind(this)}\r\n\t\t\t  renderSuggestion={this.renderSuggestion}\r\n\t\t\t  // onSuggestionHighlighted={this.onSuggestionHighlighted} (sl)\r\n\t\t\t  onSuggestionHighlighted={this.onSuggestionHighlighted.bind(this)}  \r\n\t\t\t  highlightFirstSuggestion={true}\r\n\t\t\t  // renderInputComponent={this.renderInputComponent}\r\n\t\t\t  renderSuggestionsContainer={this.renderSuggestionsContainer}\r\n\t\t\t  inputProps={{\r\n\t\t\t\t\tplaceholder: `Type part of name`,\r\n\t\t\t\t\tvalue,\r\n\t\t\t\t\tonChange: (e, changeEvent) => this.onChange(e, changeEvent),\r\n\t\t\t  }}/>;\r\n\t}\r\n\r\n\tprotected onSuggestionsClearRequested = () => {\r\n\t\tthis.setState({\r\n\t\t  suggestions: []\r\n\t\t});\r\n\t };\r\n  \r\n  \r\n\r\n\tprotected onSuggestionSelected(event: React.FormEvent<any>, data: Autosuggest.SuggestionSelectedEventData<string>): void {\r\n\t\t // const entity: IEntity = data.suggestion;\r\n\t\t // alert(`Selected student is ${student.gradeId} (${student.text}).`);\r\n\t\t this.props.onSelectQuery(this.state.value);\r\n\t}\r\n\r\n\t/*\r\n\tprotected renderSuggestion(suggestion: Student, params: Autosuggest.RenderSuggestionParams): JSX.Element {\r\n\t\t const className = params.isHighlighted ? \"highlighted\" : undefined;\r\n\t\t return <span className={className}>{suggestion.name}</span>;\r\n\t}\r\n\t*/\r\n\r\n\tprotected renderSuggestion(suggestion: string, params: Autosuggest.RenderSuggestionParams): JSX.Element {\r\n\t\t// const className = params.isHighlighted ? \"highlighted\" : undefined;\r\n\t\t//return <span className={className}>{suggestion.name}</span>;\r\n\t\tconst matches = AutosuggestHighlightMatch(suggestion, params.query);\r\n\t\tconst parts = AutosuggestHighlightParse(suggestion, matches);\r\n\t \r\n\t\treturn (\r\n\t\t  <span>\r\n\t\t\t {parts.map((part, index) => {\r\n\t\t\t\tconst className = part.highlight ? 'react-autosuggest__suggestion-match' : undefined;\r\n\t \r\n\t\t\t\treturn (\r\n\t\t\t\t  <span className={className} key={index}>\r\n\t\t\t\t\t {part.text}\r\n\t\t\t\t  </span>\r\n\t\t\t\t);\r\n\t\t\t })}\r\n\t\t  </span>\r\n\t\t);\r\n\t}\r\n\r\n\tprotected renderInputComponent(inputProps: Autosuggest.InputProps<string>): JSX.Element {\r\n\t\t const { onChange, onBlur, ...restInputProps } = inputProps;\r\n\t\t return (\r\n\t\t\t  <div>\r\n\t\t\t\t\t<input {...restInputProps} />\r\n\t\t\t  </div>\r\n\t\t );\r\n\t}\r\n\r\n\tprotected renderSuggestionsContainer({containerProps, children, query}: Autosuggest.RenderSuggestionsContainerParams): JSX.Element {\r\n\t\t return (\r\n\t\t\t  <div {...containerProps}>\r\n\t\t\t\t\t<span>{children}</span>\r\n\t\t\t  </div>\r\n\t\t );\r\n\t}\r\n\t// endregion region Event handlers\r\n\tprotected onChange(event: React.FormEvent<any>, {newValue, method}: Autosuggest.ChangeEvent): void {\r\n\t\tthis.setState({value: newValue});\r\n\t\tif (newValue === '')\r\n\t\t\tthis.props.onSelectQuery('');\r\n\t}\r\n\r\n\tprotected onSuggestionsFetchRequested({value}: any): void {\r\n\t\t this.setState({\r\n\t\t\t  suggestions: this.getSuggestions(value)\r\n\t\t });\r\n\t}\r\n\r\n\tprivate anyWord = (valueWordRegex: RegExp[], studentWords: string[]) : boolean => {\r\n\t\tfor (let valWordRegex of valueWordRegex)\r\n\t\t\tfor (let studentWord of studentWords)\r\n\t\t\t\tif (valWordRegex.test(studentWord))\r\n\t\t\t\t\treturn true;\r\n\t\treturn false;\r\n\t} \r\n\t// endregion region Helper methods\r\n\tprotected getSuggestions(value: string): string[] {\r\n\t\tconst escapedValue = escapeRegexCharacters(value.trim());\r\n\r\n\t\tif (escapedValue === '') {\r\n\t\t\treturn [];\r\n\t\t}\r\n\r\n\t\tconst valueWords = escapedValue.split(' ');\r\n\t\tconst valueWordRegex = valueWords.map(word => new RegExp(word, 'i') )\r\n\t\t// const regex = new RegExp('^' + escapedValue, 'i');\r\n\t\t// const regex = new RegExp(escapedValue, 'i');\r\n\r\n\t\treturn this.props.namesALL.filter(name => this.anyWord(valueWordRegex, name.split(' ')))\r\n\t}\r\n\r\n\tprotected getSuggestionValue(suggestion: string) {\r\n\t\t// return suggestion.name;\r\n\t\treturn this.state.value \r\n\t}\r\n\r\n\r\n\tprotected onSuggestionHighlighted(params: Autosuggest.SuggestionHighlightedParams): void {\r\n\t\t this.setState({\r\n\t\t\t  highlighted: params.suggestion\r\n\t\t });\r\n\t}\r\n\t// endregion\r\n}\r\n\r\n","import React, { useEffect } from \"react\";\r\n\r\nimport { useApp } from '../AppData/useApp'\r\n\r\nimport { useStudent, StudentProvider } from \"./useStudent\";\r\n\r\nimport { EntityList } from \"../Entity/EntityList\";\r\nimport { StudentForm } from \"./components/StudentForm\";\r\n\r\nimport { IStudent } from \"./types\";\r\nimport { AutoSuggestEntity } from \"../Common/AutoSuggest\";\r\nimport { EntityActionTypes } from \"../Entity/actions\";\r\n\r\ninterface IPageProps {\r\n}\r\n\r\nexport const Page: React.FC<IPageProps> = (props: IProps) => {\r\n\tconst { state: appState } = useApp();\r\n\r\n\tconst { state, dispatch, namesALL, getEntites, displayEntity, editEntity, removeEntity } = useStudent();\r\n\tconst { query, entities, currentPage, pageCount } = state;\r\n\t\r\n\tuseEffect(() => {\r\n\t\tgetEntites(dispatch, query, currentPage, appState);\r\n\t\tconsole.log(\"getEntites\", currentPage)\r\n\t}, [dispatch, getEntites, query, currentPage, appState]);\r\n\r\n  \treturn (\r\n\t\t<div className=\"two-columns\">\r\n\t\t\t<div className=\"a\">\r\n\t\t\t\t<h3>Students</h3>\r\n\t\t\t\t<AutoSuggestEntity \r\n\t\t\t\t\tnamesALL={namesALL}\r\n\t\t\t\t\tonSelectQuery={(query) => dispatch({ type: EntityActionTypes.SET_QUERY,\tquery })} \r\n\t\t\t\t/>\r\n\t\t\t\t<EntityList \r\n\t\t\t\t\tentities={entities}\r\n\t\t\t\t\tdispatch={dispatch}\r\n\t\t\t\t\tdisplayEntity={displayEntity}\r\n\t\t\t\t\teditEntity={editEntity}\r\n\t\t\t\t\tremoveEntity={removeEntity}\r\n\t\t\t\t\tcurrentPage={currentPage}\r\n\t\t\t\t\tpageCount={pageCount}\r\n\t\t\t\t\trenderColumns = {(entity: IStudent) => [\r\n\t\t\t\t\t\t<li key=\"types\" style={{minWidth: '60%'}}>{entity.types.join(', ')}</li>,\r\n\t\t\t\t\t\t<li key=\"img\"><img src={entity.avatar} style={{height: '30px'}} alt=\"Slika\"></img></li>,\r\n\t\t\t\t\t\t<li key=\"grades\" style={{fontSize: 'small'}}>\r\n\t\t\t\t\t\t\t{entity.grades.length > 0 &&\r\n\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\tGrades:&nbsp;\r\n\t\t\t\t\t\t\t\t\t{entity.grades.map(g => `${g.name}:${g.grade}`).join(', ')}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</li>,\r\n\t\t\t\t\t]}\r\n\t\t\t\t />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"b\">\r\n\t\t\t\t<StudentForm />\r\n\t\t\t</div>\r\n\t\t</div>    \t\t\r\n  );\r\n}\r\n\r\n\r\ninterface IProps {\r\n}\r\n\r\nexport const StudentPageExtended: React.FC<IProps> = (props: IProps) => {\r\n\treturn (\r\n\t\t<StudentProvider>\r\n\t\t\t<Page />\r\n\t\t</StudentProvider>\r\n  );\r\n}\r\n\r\n\r\n\r\n\r\n","import React from 'react';\nimport './App.css';\nimport { HashRouter as Router, Route, Switch, Link  } from 'react-router-dom'\nimport { StudentPage } from './Student/StudentPage';\nimport { StudentPageExtended } from './StudentExtended/StudentPage';\nimport { AppProvider } from './AppData/useApp';\n\nconst App: React.FC = () => {\n  return (\n\t\t<AppProvider> {/* State shared between different components (features or pages),\t\n\t\t\t\t\t\t\t\tdeeply nested in different branches of DOM tree. */}\n\t\t\t<Router>\n\t\t\t\t<nav>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<Link to=\"/student\">Student</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<Link to=\"/\" className=\"push-right\">Student Extended</Link>  {/* student-extended */}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\t\t\t\t\n\t\t\t\t</nav>\n\t\t\t\t<div>\n\t\t\t\t\t<Switch>\n\t\t\t\t\t\t<Route path=\"/student\">\n\t\t\t\t\t\t\t<StudentPage />\n\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t<Route path=\"/\">\n\t\t\t\t\t\t\t<StudentPageExtended />\n\t\t\t\t\t\t</Route>\t\t\t\t\t\t\n\t\t\t\t\t</Switch>\n\t\t\t\t</div>\t\n\t\t\t</Router>\n\t\t</AppProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}